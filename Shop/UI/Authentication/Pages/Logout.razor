@page "/logout"
@using Shop.Infrastructure.Http
@using Shop.Infrastructure.Authentication
@using Shop.Utilities

@code {
    [Inject] public HttpService Http { get; set; } = default!;
    [Inject] public CustomAuthenticationProvider Auth { get; set; } = default!;
    [Inject] public NavigationManager Navigation { get; set; } = default!;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        await Auth.ClearAuthenticationStateAsync();
        await Http.TryPostRequest<bool>( Urls.ApiLogout );
        Navigation.NavigateTo( Urls.PageHome, true );
    }
}